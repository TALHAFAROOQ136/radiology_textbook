(globalThis.webpackChunkradiology_textbook_frontend=globalThis.webpackChunkradiology_textbook_frontend||[]).push([[783],{442(e,o,t){"use strict";t.d(o,{A:()=>C});var i=t(6540),r=t(7164),n=t(8836),l=t(8290),s=t(1474),d=t(1677),a=t.n(d),c=t(5915),u=t.n(c),x=t(4848);a().external.cornerstone=r,a().external.dicomParser=u();const{Du:h,CH:p,OQ:g,LW:m,N7:y,RectangleRoiTool:f,EllipticalRoiTool:b,yT:j,Mu:v,dU:T}=l,C=({dicomUrl:e,width:o="100%",height:t="600px",onLoadingStart:l,onLoadingComplete:d,onError:a})=>{const c=(0,i.useRef)(null),[u,C]=(0,i.useState)(!0),[w,k]=(0,i.useState)(null);return(0,i.useEffect)(()=>{let o=null,t=null;return(async()=>{if(c.current){o=c.current;try{n.Ay(o)||r.enable(o),s.Ts(),t="dicom-tool-group";const i=T.createToolGroup(t);i.addTool(h.toolName),i.addTool(p.toolName),i.addTool(g.toolName),i.addTool(m.toolName),i.addTool(y.toolName),i.addTool(f.toolName),i.addTool(b.toolName),i.addTool(j.toolName),i.addTool(v.toolName),i.setToolActive(h.toolName,{bindings:[{mouseButton:0}],cursor:"grab"}),i.setToolActive(p.toolName,{bindings:[{mouseButton:2}],cursor:"move"}),i.setToolActive(g.toolName,{bindings:[{mouseButton:1}],cursor:"zoom-in"}),i.setToolActive(m.toolName,{bindings:[{mouseButton:0}],cursor:"crosshair"}),i.setToolActive(y.toolName,{bindings:[{mouseButton:0}],cursor:"crosshair"}),i.setToolActive(f.toolName,{bindings:[{mouseButton:0}],cursor:"crosshair"}),i.setToolActive(b.toolName,{bindings:[{mouseButton:0}],cursor:"crosshair"}),i.setToolActive(j.toolName,{bindings:[{mouseButton:0}],cursor:"crosshair"}),i.setToolActive(v.toolName,{bindings:[{mouseButton:0}],cursor:"crosshair"}),i.addEnabledElement(n.Ay(o)),l&&l();const a=`wadouri:${e}`,c=await r.loadImage(a);r.displayImage(o,c),C(!1),d&&d()}catch(i){console.error("Error initializing DICOM viewer:",i),k(i instanceof Error?i.message:"Failed to load DICOM image"),C(!1),a&&a(i)}}})(),()=>{if(o)try{r.disable(o)}catch(e){console.warn("Error disabling cornerstone:",e)}if(t)try{T.destroyToolGroup(t)}catch(e){console.warn("Error destroying tool group:",e)}}},[e,l,d,a]),(0,x.jsxs)("div",{style:{position:"relative",width:o,height:t},children:[u&&(0,x.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f0f0f0",zIndex:10},children:"Loading DICOM image..."}),w&&(0,x.jsxs)("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#ffebee",color:"#c62828",zIndex:10},children:["Error loading DICOM: ",w]}),(0,x.jsx)("div",{ref:c,style:{width:"100%",height:"100%",border:"1px solid #ccc",backgroundColor:"#000"}})]})}},1234(){},1783(e,o,t){"use strict";t.r(o),t.d(o,{default:()=>l});var i=t(6540),r=t(442),n=t(4848);const l=({dicomAssets:e,title:o="DICOM Gallery",maxThumbnailsPerRow:t=4})=>{const[l,s]=(0,i.useState)(null),[d,a]=(0,i.useState)(!1),c=()=>{a(!1),s(null)},u=()=>{if(null!==l){const o=0===l?e.length-1:l-1;s(o)}},x=()=>{if(null!==l){const o=l===e.length-1?0:l+1;s(o)}};return 0===e.length?(0,n.jsxs)("div",{style:{padding:"20px",textAlign:"center",color:"#666"},children:[(0,n.jsx)("h3",{children:"No DICOM images available"}),(0,n.jsx)("p",{children:"This gallery is currently empty."})]}):(0,n.jsxs)("div",{style:{padding:"20px"},children:[(0,n.jsx)("h2",{style:{marginBottom:"20px",color:"#333"},children:o}),(0,n.jsx)("div",{style:{display:"grid",gridTemplateColumns:`repeat(auto-fit, minmax(${100/t}%, 1fr))`,gap:"15px",marginBottom:"20px"},children:e.map((e,o)=>(0,n.jsxs)("div",{onClick:()=>(e=>{s(e),a(!0)})(o),style:{border:"2px solid #ddd",borderRadius:"8px",overflow:"hidden",cursor:"pointer",transition:"transform 0.2s, border-color 0.2s",aspectRatio:"1/1",display:"flex",flexDirection:"column"},onMouseEnter:e=>{e.currentTarget.style.transform="scale(1.05)",e.currentTarget.style.borderColor="#007bff"},onMouseLeave:e=>{e.currentTarget.style.transform="scale(1)",e.currentTarget.style.borderColor="#ddd"},children:[(0,n.jsx)("div",{style:{flex:1,backgroundColor:"#f0f0f0",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",color:"#666"},children:e.thumbnailPath?(0,n.jsx)("img",{src:e.thumbnailPath,alt:`Thumbnail for ${e.originalFileName}`,style:{width:"100%",height:"100%",objectFit:"contain"}}):(0,n.jsxs)("div",{style:{textAlign:"center",padding:"10px"},children:[(0,n.jsx)("div",{style:{fontSize:"24px",marginBottom:"5px"},children:"\ud83d\uddbc\ufe0f"}),(0,n.jsx)("div",{children:"Thumbnail"})]})}),(0,n.jsxs)("div",{style:{padding:"8px",backgroundColor:"#f8f9fa",fontSize:"12px",borderTop:"1px solid #eee"},children:[(0,n.jsx)("div",{style:{fontWeight:"bold",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e.studyDescription||e.originalFileName}),(0,n.jsxs)("div",{style:{color:"#666"},children:[e.modality," \u2022 ",e.bodyPartExamined]})]})]},e.id))}),d&&null!==l&&(0,n.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.9)",zIndex:1e3,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"20px"},onClick:c,onKeyDown:e=>{"Escape"===e.key?c():"ArrowLeft"===e.key?u():"ArrowRight"===e.key&&x()},tabIndex:0,children:(0,n.jsxs)("div",{style:{position:"relative",width:"100%",maxWidth:"1200px",maxHeight:"90vh",display:"flex",flexDirection:"column"},onClick:e=>e.stopPropagation(),children:[(0,n.jsx)("button",{onClick:c,style:{position:"absolute",top:"-40px",right:"0",background:"none",border:"none",color:"white",fontSize:"24px",cursor:"pointer",zIndex:1001},children:"\u2715"}),(0,n.jsx)("div",{style:{position:"absolute",top:"50%",left:"10px",transform:"translateY(-50%)",zIndex:1001},children:(0,n.jsx)("button",{onClick:u,style:{background:"rgba(255, 255, 255, 0.3)",border:"none",color:"white",fontSize:"24px",width:"40px",height:"40px",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:"<"})}),(0,n.jsx)("div",{style:{position:"absolute",top:"50%",right:"10px",transform:"translateY(-50%)",zIndex:1001},children:(0,n.jsx)("button",{onClick:x,style:{background:"rgba(255, 255, 255, 0.3)",border:"none",color:"white",fontSize:"24px",width:"40px",height:"40px",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:">"})}),(0,n.jsx)("div",{style:{flex:1,minHeight:"600px",marginBottom:"10px"},children:(0,n.jsx)(r.A,{dicomUrl:e[l].filePath,width:"100%",height:"100%"})}),(0,n.jsxs)("div",{style:{backgroundColor:"rgba(255, 255, 255, 0.9)",padding:"10px",borderRadius:"4px",color:"#333"},children:[(0,n.jsx)("div",{style:{fontWeight:"bold",fontSize:"16px",marginBottom:"5px"},children:e[l].originalFileName}),(0,n.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:"15px",fontSize:"14px"},children:[e[l].studyDescription&&(0,n.jsxs)("span",{children:[(0,n.jsx)("strong",{children:"Study:"})," ",e[l].studyDescription]}),e[l].seriesDescription&&(0,n.jsxs)("span",{children:[(0,n.jsx)("strong",{children:"Series:"})," ",e[l].seriesDescription]}),e[l].modality&&(0,n.jsxs)("span",{children:[(0,n.jsx)("strong",{children:"Modality:"})," ",e[l].modality]}),e[l].patientName&&(0,n.jsxs)("span",{children:[(0,n.jsx)("strong",{children:"Patient:"})," ",e[l].patientName]})]})]})]})})]})}},6559(){}}]);